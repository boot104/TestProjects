@using DevExpress.AspNetCore
@using DevExpress
@using DevExpress.XtraReports.UI
@using DevExpress.DataAccess.Sql
@using Core2Web.Models

@{
    ViewData["Title"] = "Home Page";
}


@{
    Html.DevExtreme().PivotGrid<OrderViewModel>()
        .ID("sample-pivot")
            .AllowSortingBySummary(true)
            .AllowSorting(true)
            .AllowFiltering(true)
            .AllowExpandAll(true)
            //.Height(440)
            .ShowBorders(true)
            .FieldChooser(c => c.Enabled(true))
            .FieldPanel(p => p.Visible(true))
            .FieldPanel(p => p
            .ShowColumnFields(true)
            .ShowDataFields(true)
            .ShowFilterFields(true)
            .ShowRowFields(true)
            .AllowFieldDragging(true)
            .Visible(true))
            .FieldChooser(c => { c.Height(850); c.Width(800); c.ApplyChangesMode(ApplyChangesMode.Instantly); })
                .DataSource(d => d
                .Store(ds => ds.Mvc()
                .Controller("Home")
                .LoadAction("GetDatasource")
                //.LoadMethod("POST")
                ).RemoteOperations(true)
            .Fields(f => {
                f.Add().DataField("ShipName").Area(PivotGridArea.Row).Visible(true);
                f.Add().DataField("ShipAddress");
                f.Add().DataField("OrderDate").Area(PivotGridArea.Column).Visible(true);
                f.Add().DataField("Quantity").Area(PivotGridArea.Data).Visible(true).SummaryType(SummaryType.Sum);
                f.Add().DataField("UnitPrice").SummaryType(SummaryType.Sum);
            })).Render();
}